# Clipboard Inspector

Working with the clipboard in web browsers is subject to many inconsistencies. This tool helps you explore the content of the clipboard when you paste something on a web page.

Run it online: [https://danburzo.github.io/clipboard-inspector/](https://danburzo.github.io/clipboard-inspector/)

## Reading from the clipboard

A `paste` event contains the `clipboardData` property, which has the following properties of interest:

* `types` is an array of MIME types available in the clipboard;
* `items` is a list of `DataTransferItem` objects (`DataTransferItemList`);
* `files` is a list of `File` objects available in the clipboard.

Additionally, `clipboardData` contains the `getData(type)` method to fetch a string representation of the data for a specific format.

In our context `DataTransferItem.getAsString()` seems to be useless, as textual data can be read synchronously through other methods.

## Specification

[W3C Clipboard API and Events](https://w3c.github.io/clipboard-apis/), Editor's Draft.

## Browser support

Feature | Firefox | Chrome | Safari
------- | ------- | ------ | ------
Accessing clipboard data in custom MIME formats (other than `text/plain`, `text/html`, `Files`) generated by system applications (e.g. Sketch, Adobe products)<sup>1</sup> | No ([Issue](https://bugzilla.mozilla.org/show_bug.cgi?id=1389919))| No ([Issue](https://bugs.chromium.org/p/chromium/issues/detail?id=487266)) | Yes
Reading images from the clipboard | Yes | Yes | No ([Issue](https://bugs.webkit.org/show_bug.cgi?id=170449))<sup>2</sup>

<sup>1</sup> Note that this is not mandated by the W3C spec but is indeed a Very Nice Thing To Have.
<sup>2</sup> While it's impossible to read images from the clipboard in Safari due to lack of support of both `clipboardData.items` and `clipboardData.files`, you can paste into a contentEditable element and retrieve the image from there.

### Browser milestones

#### Firefox

* Firefox 50 made [`clipboardData.items` available](https://bugzilla.mozilla.org/show_bug.cgi?id=906420)
* Firefox 52 changed [`clipboardData.types` to a simple array](https://bugzilla.mozilla.org/show_bug.cgi?id=1298243); that means it's best to always cast `types` to an array, just to be sure.

### Notes

It turns out it's pretty hard to test this across browsers, as Browserstack, Sauce Labs, Browserling et al only support basic clipboard functionality.

## Running the project locally

The project requires Node and NPM/Yarn to run locally. It's built with React (piped through Babel / Webpack) — a bit more cumbersome to set up but makes it easy to prototype quickly.

After cloning the repo, run `yarn` (or `npm install`) in the project folder to install all dependencies. 

To start a local server:

`yarn start` (or `npm start`)

This will make the project available on [http://localhost:8080](http://localhost:8080).

To build the project:

`yarn build` (or `npm build`)

I use this to build the JS bundle in the `dist` folder so that you can access the tool online via Github Pages (the repo has Pages set up based on the `master` branch).

## Additional resources

* [Clipboard test](http://madebyevan.com/clipboard-test/) is a similar tool built by Evan Wallace (of Figma) in May 2015.